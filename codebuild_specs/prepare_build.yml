---
version: 0.2
phases:
  install:
    runtime-versions:
      nodejs: 14
    commands:
      - yarn config set script-shell $(which bash)
  pre_build:
    commands:
      # - yarn
      # - /bin/bash ./codebuild_specs/cache-load.sh
      # - echo running prebuild
      # - yarn config set cache-folder /root/.yarn-cache -g
      # - yarn install --frozen-lockfile
      - ls /root/.cache/yarn
      - ls node_modules
      - ./
      - yarn lint-check
  build:
    commands:
      # - yarn production-build
  post_build:
    commands:
      # - /bin/bash ./codebuild_specs/cache-store.sh
cache:
  paths:
    - '/root/.cache/yarn/**/*'
    - 'node_modules/**/*'
    - 'packages/**/node_modules/**/*'
