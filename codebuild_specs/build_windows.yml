version: 0.2
env:
  shell: powershell.exe
phases:
  install:
    commands:
      - npm install --save-dev -g yarn
      - pip install setuptools
      - choco install -fy visualstudio2022-workload-vctools
  build:
    commands:
      - cd scripts
      - yarn
      - cd ..
      - yarn --immutable
      - yarn production-build
      - yarn build-tests
      - bash ./codebuild_specs/scripts-windows/save-build-windows.sh

artifacts:
  files:
    - 'shared-scripts.sh'
