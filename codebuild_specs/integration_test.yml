version: 0.2
env:
  shell: bash
  variables:
    CI: true
    CIRCLECI: true
    IS_AMPLIFY_CI: true
phases:
  install:
    commands:
      - dnf install -y xorg-x11-server-Xvfb gtk3-devel nss alsa-lib
  build:
    commands:
      - source ./shared-scripts.sh && _integrationTest
artifacts:
  files:
    - $CODEBUILD_SRC_DIR/../aws-amplify-cypress-auth/cypress/videos/*
    - $CODEBUILD_SRC_DIR/../aws-amplify-cypress-auth/cypress/screenshots/*
    - $CODEBUILD_SRC_DIR/../aws-amplify-cypress-api/cypress/videos/*
    - $CODEBUILD_SRC_DIR/../aws-amplify-cypress-api/cypress/screenshots/*
