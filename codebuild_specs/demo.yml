---
version: 0.2
phases:
  install:
    runtime-versions:
      nodejs: 14
    commands:
      - yarn install
  pre_build:
    commands:
      - yarn config set script-shell $(which bash)
      - echo Pre-build completed
  build:
    commands:
      - yarn run production-build
  post_build:
    commands:
      - yarn lint-check
      - yarn test-ci
      - yarn verify-api-extract
      - yarn verify-yarn-lock
      - echo Post build complete
artifacts:
  files:
    - "**/*"
batch:
  fast-fail: true
  build-list:
    - identifier: build1
      env:
        variables:
          NODE_OPTIONS: --max-old-space-size=4096
cache:
  paths:
    - ~/.cache/yarn/**/*
