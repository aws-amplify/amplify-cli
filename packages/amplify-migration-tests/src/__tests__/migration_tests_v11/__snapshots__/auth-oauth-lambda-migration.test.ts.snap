// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`amplify add auth... ...should init an Js project and add Oauth settings with userpool 1`] = `
"IAM Statement Changes
┌───┬───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┬────────┬────────────────────────────────────┬───────────────────────────┬───────────┐
│   │ Resource                                                                                                                                                                                      │ Effect │ Action                             │ Principal                 │ Condition │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ \${UserPool.Arn}                                                                                                                                                                               │ Allow  │ cognito-idp:DescribeUserPoolClient │ AWS:\${UserPoolClientRole} │           │
│ - │ \${UserPool.Arn}                                                                                                                                                                               │ Allow  │ cognito-idp:CreateUserPoolDomain   │ AWS:\${UserPoolClientRole} │           │
│   │                                                                                                                                                                                               │        │ cognito-idp:DeleteUserPoolDomain   │                           │           │
│   │                                                                                                                                                                                               │        │ cognito-idp:DescribeUserPool       │                           │           │
│ - │ \${UserPool.Arn}                                                                                                                                                                               │ Allow  │ cognito-idp:UpdateUserPoolClient   │ AWS:\${UserPoolClientRole} │           │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ *                                                                                                                                                                                             │ Allow  │ cognito-idp:DescribeUserPoolDomain │ AWS:\${UserPoolClientRole} │           │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ {\\"Fn::Sub\\":[\\"arn:aws:logs:\${region}:\${account}:log-group:/aws/lambda/\${lambda}:log-stream:*\\",{\\"region\\":\\"\${AWS::Region}\\",\\"account\\":\\"\${AWS::AccountId}\\",\\"lambda\\":\\"\${HostedUICustomResource}\\"}]} │ Allow  │ logs:CreateLogGroup                │ AWS:\${UserPoolClientRole} │           │
│   │                                                                                                                                                                                               │        │ logs:CreateLogStream               │                           │           │
│   │                                                                                                                                                                                               │        │ logs:PutLogEvents                  │                           │           │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ {\\"Fn::Sub\\":[\\"arn:aws:logs:\${region}:\${account}:log-group:/aws/lambda/\${lambda}:log-stream:*\\",{\\"region\\":\\"\${AWS::Region}\\",\\"account\\":\\"\${AWS::AccountId}\\",\\"lambda\\":\\"\${OAuthCustomResource}\\"}]}    │ Allow  │ logs:CreateLogGroup                │ AWS:\${UserPoolClientRole} │           │
│   │                                                                                                                                                                                               │        │ logs:CreateLogStream               │                           │           │
│   │                                                                                                                                                                                               │        │ logs:PutLogEvents                  │                           │           │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ {\\"Fn::Sub\\":[\\"arn:aws:logs:\${region}:\${account}:log-group:/aws/lambda/\${lambda}:log-stream:*\\",{\\"region\\":\\"\${AWS::Region}\\",\\"account\\":\\"\${AWS::AccountId}\\",\\"lambda\\":\\"\${UserPoolClientLambda}\\"}]}   │ Allow  │ logs:CreateLogGroup                │ AWS:\${UserPoolClientRole} │           │
│   │                                                                                                                                                                                               │        │ logs:CreateLogStream               │                           │           │
│   │                                                                                                                                                                                               │        │ logs:PutLogEvents                  │                           │           │
└───┴───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┴────────┴────────────────────────────────────┴───────────────────────────┴───────────┘
(NOTE: There may be security-related changes not in this list. See https://github.com/aws/aws-cdk/issues/1299)

Conditions
[-] Condition ShouldOutputAppClientSecrets: {\\"Fn::Equals\\":[{\\"Ref\\":\\"userpoolClientGenerateSecret\\"},true]}

Resources
[-] AWS::Lambda::Function UserPoolClientLambda destroy
[-] AWS::IAM::Policy UserPoolClientLambdaPolicy destroy
[-] AWS::IAM::Policy UserPoolClientLogPolicy destroy
[-] Custom::LambdaCallout UserPoolClientInputs destroy
[-] AWS::Lambda::Function HostedUICustomResource destroy
[-] AWS::IAM::Policy HostedUICustomResourcePolicy destroy
[-] AWS::IAM::Policy HostedUICustomResourceLogPolicy destroy
[-] Custom::LambdaCallout HostedUICustomResourceInputs destroy
[-] AWS::Lambda::Function OAuthCustomResource destroy
[-] AWS::IAM::Policy OAuthCustomResourcePolicy destroy
[-] AWS::IAM::Policy OAuthCustomResourceLogPolicy destroy
[-] Custom::LambdaCallout OAuthCustomResourceInputs destroy
[+] AWS::Cognito::UserPoolDomain HostedUIDomainResource 
[~] AWS::Cognito::UserPoolClient UserPoolClientWeb 
 ├─ [+] AllowedOAuthFlows
 │   └─ [\\"code\\"]
 ├─ [+] AllowedOAuthFlowsUserPoolClient
 │   └─ true
 ├─ [+] AllowedOAuthScopes
 │   └─ [\\"phone\\",\\"email\\",\\"openid\\",\\"profile\\",\\"aws.cognito.signin.user.admin\\"]
 ├─ [+] CallbackURLs
 │   └─ [\\"https://sin1/\\",\\"https://sin2/\\"]
 ├─ [+] LogoutURLs
 │   └─ [\\"https://sout1/\\",\\"https://sout2/\\"]
 ├─ [+] SupportedIdentityProviders
 │   └─ [\\"Facebook\\",\\"Google\\",\\"LoginWithAmazon\\",\\"SignInWithApple\\",\\"COGNITO\\"]
 └─ [~] DependsOn
     └─ @@ -1,3 +1,4 @@
        [ ] [
        [+]   \\"HostedUIProvidersCustomResourceInputs\\",
        [ ]   \\"UserPool\\"
        [ ] ]
[~] AWS::Cognito::UserPoolClient UserPoolClient 
 ├─ [+] AllowedOAuthFlows
 │   └─ [\\"code\\"]
 ├─ [+] AllowedOAuthFlowsUserPoolClient
 │   └─ true
 ├─ [+] AllowedOAuthScopes
 │   └─ [\\"phone\\",\\"email\\",\\"openid\\",\\"profile\\",\\"aws.cognito.signin.user.admin\\"]
 ├─ [+] CallbackURLs
 │   └─ [\\"https://sin1/\\",\\"https://sin2/\\"]
 ├─ [+] LogoutURLs
 │   └─ [\\"https://sout1/\\",\\"https://sout2/\\"]
 ├─ [+] SupportedIdentityProviders
 │   └─ [\\"Facebook\\",\\"Google\\",\\"LoginWithAmazon\\",\\"SignInWithApple\\",\\"COGNITO\\"]
 └─ [~] DependsOn
     └─ @@ -1,3 +1,4 @@
        [ ] [
        [+]   \\"HostedUIProvidersCustomResourceInputs\\",
        [ ]   \\"UserPool\\"
        [ ] ]
[~] AWS::IAM::Role UserPoolClientRole 
 └─ [-] DependsOn
     └─ [\\"UserPoolClient\\"]

Outputs
[-] Output AppClientSecret: {\\"Value\\":{\\"Fn::GetAtt\\":[\\"UserPoolClientInputs\\",\\"appSecret\\"]},\\"Condition\\":\\"ShouldOutputAppClientSecrets\\"}

"
`;

exports[`amplify add auth... ...should init an Js project and add Oauth settings with userpool 2`] = `
"IAM Statement Changes
┌───┬───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┬────────┬────────────────────────────────────┬───────────────────────────┬───────────┐
│   │ Resource                                                                                                                                                                                      │ Effect │ Action                             │ Principal                 │ Condition │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ \${UserPool.Arn}                                                                                                                                                                               │ Allow  │ cognito-idp:DescribeUserPoolClient │ AWS:\${UserPoolClientRole} │           │
│ - │ \${UserPool.Arn}                                                                                                                                                                               │ Allow  │ cognito-idp:CreateUserPoolDomain   │ AWS:\${UserPoolClientRole} │           │
│   │                                                                                                                                                                                               │        │ cognito-idp:DeleteUserPoolDomain   │                           │           │
│   │                                                                                                                                                                                               │        │ cognito-idp:DescribeUserPool       │                           │           │
│ - │ \${UserPool.Arn}                                                                                                                                                                               │ Allow  │ cognito-idp:UpdateUserPoolClient   │ AWS:\${UserPoolClientRole} │           │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ *                                                                                                                                                                                             │ Allow  │ cognito-idp:DescribeUserPoolDomain │ AWS:\${UserPoolClientRole} │           │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ {\\"Fn::Sub\\":[\\"arn:aws:logs:\${region}:\${account}:log-group:/aws/lambda/\${lambda}:log-stream:*\\",{\\"region\\":\\"\${AWS::Region}\\",\\"account\\":\\"\${AWS::AccountId}\\",\\"lambda\\":\\"\${HostedUICustomResource}\\"}]} │ Allow  │ logs:CreateLogGroup                │ AWS:\${UserPoolClientRole} │           │
│   │                                                                                                                                                                                               │        │ logs:CreateLogStream               │                           │           │
│   │                                                                                                                                                                                               │        │ logs:PutLogEvents                  │                           │           │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ {\\"Fn::Sub\\":[\\"arn:aws:logs:\${region}:\${account}:log-group:/aws/lambda/\${lambda}:log-stream:*\\",{\\"region\\":\\"\${AWS::Region}\\",\\"account\\":\\"\${AWS::AccountId}\\",\\"lambda\\":\\"\${OAuthCustomResource}\\"}]}    │ Allow  │ logs:CreateLogGroup                │ AWS:\${UserPoolClientRole} │           │
│   │                                                                                                                                                                                               │        │ logs:CreateLogStream               │                           │           │
│   │                                                                                                                                                                                               │        │ logs:PutLogEvents                  │                           │           │
├───┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┼────────┼────────────────────────────────────┼───────────────────────────┼───────────┤
│ - │ {\\"Fn::Sub\\":[\\"arn:aws:logs:\${region}:\${account}:log-group:/aws/lambda/\${lambda}:log-stream:*\\",{\\"region\\":\\"\${AWS::Region}\\",\\"account\\":\\"\${AWS::AccountId}\\",\\"lambda\\":\\"\${UserPoolClientLambda}\\"}]}   │ Allow  │ logs:CreateLogGroup                │ AWS:\${UserPoolClientRole} │           │
│   │                                                                                                                                                                                               │        │ logs:CreateLogStream               │                           │           │
│   │                                                                                                                                                                                               │        │ logs:PutLogEvents                  │                           │           │
└───┴───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┴────────┴────────────────────────────────────┴───────────────────────────┴───────────┘
(NOTE: There may be security-related changes not in this list. See https://github.com/aws/aws-cdk/issues/1299)

Conditions
[-] Condition ShouldOutputAppClientSecrets: {\\"Fn::Equals\\":[{\\"Ref\\":\\"userpoolClientGenerateSecret\\"},true]}

Resources
[-] AWS::Lambda::Function UserPoolClientLambda destroy
[-] AWS::IAM::Policy UserPoolClientLambdaPolicy destroy
[-] AWS::IAM::Policy UserPoolClientLogPolicy destroy
[-] Custom::LambdaCallout UserPoolClientInputs destroy
[-] AWS::Lambda::Function HostedUICustomResource destroy
[-] AWS::IAM::Policy HostedUICustomResourcePolicy destroy
[-] AWS::IAM::Policy HostedUICustomResourceLogPolicy destroy
[-] Custom::LambdaCallout HostedUICustomResourceInputs destroy
[-] AWS::Lambda::Function OAuthCustomResource destroy
[-] AWS::IAM::Policy OAuthCustomResourcePolicy destroy
[-] AWS::IAM::Policy OAuthCustomResourceLogPolicy destroy
[-] Custom::LambdaCallout OAuthCustomResourceInputs destroy
[+] AWS::Cognito::UserPoolDomain HostedUIDomainResource 
[~] AWS::Cognito::UserPoolClient UserPoolClientWeb 
 ├─ [+] AllowedOAuthFlows
 │   └─ [\\"code\\"]
 ├─ [+] AllowedOAuthFlowsUserPoolClient
 │   └─ true
 ├─ [+] AllowedOAuthScopes
 │   └─ [\\"phone\\",\\"email\\",\\"openid\\",\\"profile\\",\\"aws.cognito.signin.user.admin\\"]
 ├─ [+] CallbackURLs
 │   └─ [\\"https://sin1/\\",\\"https://sin2/\\"]
 ├─ [+] LogoutURLs
 │   └─ [\\"https://sout1/\\",\\"https://sout2/\\"]
 ├─ [+] SupportedIdentityProviders
 │   └─ [\\"Facebook\\",\\"Google\\",\\"LoginWithAmazon\\",\\"SignInWithApple\\",\\"COGNITO\\"]
 └─ [~] DependsOn
     └─ @@ -1,3 +1,4 @@
        [ ] [
        [+]   \\"HostedUIProvidersCustomResourceInputs\\",
        [ ]   \\"UserPool\\"
        [ ] ]
[~] AWS::Cognito::UserPoolClient UserPoolClient 
 ├─ [+] AllowedOAuthFlows
 │   └─ [\\"code\\"]
 ├─ [+] AllowedOAuthFlowsUserPoolClient
 │   └─ true
 ├─ [+] AllowedOAuthScopes
 │   └─ [\\"phone\\",\\"email\\",\\"openid\\",\\"profile\\",\\"aws.cognito.signin.user.admin\\"]
 ├─ [+] CallbackURLs
 │   └─ [\\"https://sin1/\\",\\"https://sin2/\\"]
 ├─ [+] LogoutURLs
 │   └─ [\\"https://sout1/\\",\\"https://sout2/\\"]
 ├─ [+] SupportedIdentityProviders
 │   └─ [\\"Facebook\\",\\"Google\\",\\"LoginWithAmazon\\",\\"SignInWithApple\\",\\"COGNITO\\"]
 └─ [~] DependsOn
     └─ @@ -1,3 +1,4 @@
        [ ] [
        [+]   \\"HostedUIProvidersCustomResourceInputs\\",
        [ ]   \\"UserPool\\"
        [ ] ]
[~] AWS::IAM::Role UserPoolClientRole 
 └─ [-] DependsOn
     └─ [\\"UserPoolClient\\"]

Outputs
[-] Output AppClientSecret: {\\"Value\\":{\\"Fn::GetAtt\\":[\\"UserPoolClientInputs\\",\\"appSecret\\"]},\\"Condition\\":\\"ShouldOutputAppClientSecrets\\"}

"
`;
