{"version":3,"file":"consolidate-apigw-policies.js","sourceRoot":"","sources":["../../src/utils/consolidate-apigw-policies.ts"],"names":[],"mappings":"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"}